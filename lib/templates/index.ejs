<?php
// Autogenerated by plesk-ext-sdk. Please don't touch it.

class IndexController extends pm_Controller_Action
{
    public function indexAction()
    {
        $this->redirect('<%= routes[0].path %>');
    }

    public function viewAction() {
        $this->_helper->_viewRenderer->setNoRender();

        $baseUrl = \pm_Context::getBaseUrl();
        $moduleId = \pm_Context::getModuleId();
        $params = json_encode([
            'moduleId' => $moduleId,
            'baseUrl' => $baseUrl . 'index.php',
        ]);

        echo <<<HTML
<div id="$moduleId"></div>
<script>
    require(['$baseUrl/dist/main.js'], function (main) {
        main($params);
    });
</script>
HTML;
    }
}

$application = new pm_Application();

$router = \Zend_Controller_Front::getInstance()->getRouter();
$router->addConfig(new \Zend_Config([
    'Default' => [
        'route' => ':controller/:action',
    ],
<% for (var route of routes) { %>
    '<%= route.component %>' => [
        'route' => '<%= route.path %>',
        'defaults' => ['controller' => 'index', 'action' => 'view'],
    ],
<% } %>
]));

$application->run();
